function _0x4c7c(_0x523942,_0x223a65){const _0x463c22=_0x463c();return _0x4c7c=function(_0x4c7c4a,_0x3c576){_0x4c7c4a=_0x4c7c4a-0xee;let _0x328ec9=_0x463c22[_0x4c7c4a];return _0x328ec9;},_0x4c7c(_0x523942,_0x223a65);}const _0x25f1be=_0x4c7c;(function(_0x756860,_0xe4fef0){const _0xb6bd92=_0x4c7c,_0x2e3dd0=_0x756860();while(!![]){try{const _0x2462f0=-parseInt(_0xb6bd92(0xfa))/0x1*(-parseInt(_0xb6bd92(0xf4))/0x2)+-parseInt(_0xb6bd92(0x184))/0x3*(parseInt(_0xb6bd92(0x155))/0x4)+parseInt(_0xb6bd92(0x17a))/0x5+parseInt(_0xb6bd92(0x150))/0x6+-parseInt(_0xb6bd92(0x131))/0x7*(-parseInt(_0xb6bd92(0x14d))/0x8)+-parseInt(_0xb6bd92(0x12c))/0x9+-parseInt(_0xb6bd92(0x120))/0xa;if(_0x2462f0===_0xe4fef0)break;else _0x2e3dd0['push'](_0x2e3dd0['shift']());}catch(_0x3e60e9){_0x2e3dd0['push'](_0x2e3dd0['shift']());}}}(_0x463c,0xab4a7));let sessionExpiryTime=null,currentSessionInfo={'sessionId':null,'originalCode':null,'isValid':!![],'createdAt':null,'deviceFingerprint':null,'sessionToken':null,'browserId':null},heartbeatInterval=null,monitoringInterval=null,verifyFingerprint=![];const browserInstanceId=generateBrowserInstanceId();let originalCookies=null,cookieMonitoringInterval=null,globalInvalidationCheckInterval=null,isSessionClosing=![],sessionPersistenceEnabled=!![];function generateBrowserInstanceId(){const _0xb4b6d8=_0x4c7c;return _0xb4b6d8(0x181)+Math[_0xb4b6d8(0x12a)]()[_0xb4b6d8(0x165)](0x24)[_0xb4b6d8(0x126)](0x2,0xf)+Math[_0xb4b6d8(0x12a)]()[_0xb4b6d8(0x165)](0x24)[_0xb4b6d8(0x126)](0x2,0xf);}function saveSessionExpiry(_0x3d5c8e){const _0x2ba012=_0x4c7c;sessionExpiryTime=_0x3d5c8e,chrome['storage'][_0x2ba012(0xfe)][_0x2ba012(0x185)]({'sessionExpiryTime':_0x3d5c8e});}function loadSessionExpiry(){return new Promise(_0x50bd4d=>{const _0x396865=_0x4c7c;chrome[_0x396865(0x167)][_0x396865(0xfe)][_0x396865(0x12d)](['sessionExpiryTime'],_0x184d5d=>{const _0x256b4b=_0x396865;sessionExpiryTime=_0x184d5d[_0x256b4b(0x18e)]||null,_0x50bd4d(sessionExpiryTime);});});}loadSessionExpiry();async function generateDeviceFingerprint(){const _0x367961=_0x4c7c;try{const _0x575067=['netflix_session_stable'],_0x3303eb=_0x575067[_0x367961(0x113)]('|'),_0x55505c=new TextEncoder(),_0x327d21=_0x55505c[_0x367961(0x12b)](_0x3303eb),_0x3bdd51=await crypto[_0x367961(0x17f)]['digest'](_0x367961(0x11d),_0x327d21),_0x2b40e4=Array[_0x367961(0x15e)](new Uint8Array(_0x3bdd51));return _0x2b40e4[_0x367961(0x100)](_0x37dadb=>_0x37dadb[_0x367961(0x165)](0x10)[_0x367961(0x129)](0x2,'0'))[_0x367961(0x113)]('');}catch(_0x307768){return console[_0x367961(0x182)](_0x367961(0x112),_0x307768),_0x367961(0x15f);}}function isSessionPasteCode(_0x162726){return _0x162726['startsWith']('session_paste');}async function getNetflixCookies(){const _0x18a45e=_0x4c7c;try{return await chrome[_0x18a45e(0x109)][_0x18a45e(0x11f)]({'domain':_0x18a45e(0x186)});}catch(_0x31c388){return console[_0x18a45e(0x182)](_0x18a45e(0x180),_0x31c388),[];}}function compareCookies(_0x18f68d,_0xb46b48){const _0x4f5aa8=_0x4c7c;if(!_0x18f68d||!_0xb46b48)return![];if(_0x18f68d[_0x4f5aa8(0x128)]!==_0xb46b48[_0x4f5aa8(0x128)])return!![];const _0x743de2=new Map(),_0x1372ee=new Map();_0x18f68d[_0x4f5aa8(0x12e)](_0x517277=>{const _0x3f3d72=_0x4f5aa8;_0x743de2[_0x3f3d72(0x185)](_0x517277['name'],_0x517277[_0x3f3d72(0x189)]);}),_0xb46b48[_0x4f5aa8(0x12e)](_0x127c36=>{const _0xc9cf14=_0x4f5aa8;_0x1372ee[_0xc9cf14(0x185)](_0x127c36[_0xc9cf14(0x110)],_0x127c36[_0xc9cf14(0x189)]);});for(const [_0x4f9122,_0x390699]of _0x743de2){if(_0x1372ee['get'](_0x4f9122)!==_0x390699)return!![];}return![];}function startCookieMonitoring(){cookieMonitoringInterval&&clearInterval(cookieMonitoringInterval),cookieMonitoringInterval=setInterval(async()=>{const _0x1c6e0a=_0x4c7c;try{if(!currentSessionInfo[_0x1c6e0a(0x135)]||!currentSessionInfo[_0x1c6e0a(0x16d)]||isSessionClosing)return;const _0xfdacde=await getNetflixCookies();if(!originalCookies){originalCookies=_0xfdacde;return;}if(compareCookies(originalCookies,_0xfdacde)){console['warn'](_0x1c6e0a(0xf9));const _0x4d12f3=_0xfdacde[_0x1c6e0a(0x169)](_0x469a8c=>_0x469a8c[_0x1c6e0a(0x110)]==='nf_session_id_heartbeat'&&_0x469a8c[_0x1c6e0a(0x189)]===browserInstanceId);!_0x4d12f3&&(console[_0x1c6e0a(0x123)](_0x1c6e0a(0x17d)),logSecurityEvent(_0x1c6e0a(0x158),{'sessionId':currentSessionInfo[_0x1c6e0a(0x135)],'reason':_0x1c6e0a(0x13a)}));}}catch(_0xa9483d){console[_0x1c6e0a(0x182)]('Error\x20en\x20monitoreo\x20de\x20cookies:',_0xa9483d);}},0x7530);}function stopCookieMonitoring(){cookieMonitoringInterval&&(clearInterval(cookieMonitoringInterval),cookieMonitoringInterval=null),originalCookies=null;}function startGlobalInvalidationCheck(){globalInvalidationCheckInterval&&clearInterval(globalInvalidationCheckInterval),globalInvalidationCheckInterval=setInterval(async()=>{const _0x18a3f5=_0x4c7c;try{if(!currentSessionInfo[_0x18a3f5(0x135)]||!currentSessionInfo[_0x18a3f5(0x16d)]||isSessionClosing)return;const _0x3388ea=await chrome[_0x18a3f5(0x167)][_0x18a3f5(0xfe)][_0x18a3f5(0x12d)](['globalSessionInvalidation']);if(_0x3388ea['globalSessionInvalidation']&&_0x3388ea[_0x18a3f5(0x121)][_0x18a3f5(0x135)]===currentSessionInfo['sessionId']&&_0x3388ea[_0x18a3f5(0x121)][_0x18a3f5(0x106)]!==browserInstanceId){console[_0x18a3f5(0x123)](_0x18a3f5(0x10b)),logSecurityEvent('global_invalidation_attempted',{'sessionId':currentSessionInfo[_0x18a3f5(0x135)],'reason':_0x18a3f5(0x16e)});return;}const _0x3081de=await chrome[_0x18a3f5(0x109)][_0x18a3f5(0x12d)]({'url':_0x18a3f5(0x157),'name':_0x18a3f5(0x137)});if(_0x3081de&&_0x3081de[_0x18a3f5(0x189)]===currentSessionInfo[_0x18a3f5(0x135)]){console['warn'](_0x18a3f5(0x10c)),await chrome['cookies'][_0x18a3f5(0x102)]({'url':_0x18a3f5(0x157),'name':'nf_session_invalidated'}),logSecurityEvent(_0x18a3f5(0x14c),{'sessionId':currentSessionInfo[_0x18a3f5(0x135)],'reason':_0x18a3f5(0x18d)});return;}}catch(_0x53ec2e){console[_0x18a3f5(0x182)](_0x18a3f5(0x161),_0x53ec2e);}},0x7530);}function stopGlobalInvalidationCheck(){globalInvalidationCheckInterval&&(clearInterval(globalInvalidationCheckInterval),globalInvalidationCheckInterval=null);}function startHeartbeat(_0xc6e052){heartbeatInterval&&clearInterval(heartbeatInterval),heartbeatInterval=setInterval(async()=>{const _0xc6da72=_0x4c7c;try{if(!currentSessionInfo[_0xc6da72(0x135)]||!currentSessionInfo['isValid']||isSessionClosing){clearInterval(heartbeatInterval),heartbeatInterval=null;return;}await chrome[_0xc6da72(0x167)][_0xc6da72(0xfe)][_0xc6da72(0x185)]({['heartbeat_'+_0xc6e052]:Date[_0xc6da72(0x147)]()});try{await chrome[_0xc6da72(0x109)]['set']({'url':_0xc6da72(0x157),'name':_0xc6da72(0x173),'value':browserInstanceId,'domain':'.netflix.com','secure':!![],'httpOnly':![],'expirationDate':Date['now']()/0x3e8+0x258});}catch(_0x42c1c4){console['error'](_0xc6da72(0x171),_0x42c1c4);}const _0x25b021=await chrome['storage']['local'][_0xc6da72(0x12d)]([_0xc6e052]);(!_0x25b021[_0xc6e052]||!_0x25b021[_0xc6e052][_0xc6da72(0x13d)])&&(clearInterval(heartbeatInterval),heartbeatInterval=null);}catch(_0xce37be){console['error']('Error\x20en\x20heartbeat:',_0xce37be);}},0x493e0);}function stopHeartbeat(){const _0x1dd831=_0x4c7c;heartbeatInterval&&(clearInterval(heartbeatInterval),heartbeatInterval=null);try{chrome[_0x1dd831(0x109)]['remove']({'url':_0x1dd831(0x157),'name':_0x1dd831(0x173)});}catch(_0x4678f0){console['error'](_0x1dd831(0xef),_0x4678f0);}}function startSecurityMonitoring(){monitoringInterval&&clearInterval(monitoringInterval),monitoringInterval=setInterval(async()=>{const _0x1bc710=_0x4c7c;try{if(!currentSessionInfo[_0x1bc710(0x135)]||!currentSessionInfo['isValid']||isSessionClosing)return;const _0x120109=await chrome['storage'][_0x1bc710(0xfe)][_0x1bc710(0x12d)]([_0x1bc710(0x116)]);if(!_0x120109[_0x1bc710(0x116)]||_0x120109[_0x1bc710(0x116)]!==currentSessionInfo['sessionToken']){console[_0x1bc710(0x123)]('Token\x20de\x20sesión\x20inválido,\x20pero\x20manteniendo\x20sesión\x20activa'),logSecurityEvent(_0x1bc710(0x168),{'sessionId':currentSessionInfo[_0x1bc710(0x135)],'reason':_0x1bc710(0x10e)});return;}if(sessionExpiryTime&&Date[_0x1bc710(0x147)]()>sessionExpiryTime){console[_0x1bc710(0x123)]('Sesión\x20expirada,\x20invalidando'),await invalidateSession(_0x1bc710(0x11c));return;}const _0x543d2c=await chrome[_0x1bc710(0x167)][_0x1bc710(0xfe)]['get']([_0x1bc710(0x134)+currentSessionInfo[_0x1bc710(0x135)]]);if(!_0x543d2c[_0x1bc710(0x134)+currentSessionInfo[_0x1bc710(0x135)]]){console[_0x1bc710(0x123)](_0x1bc710(0x144)),logSecurityEvent(_0x1bc710(0x154),{'sessionId':currentSessionInfo['sessionId'],'reason':_0x1bc710(0x174)});return;}const _0x4b6134=_0x543d2c[_0x1bc710(0x134)+currentSessionInfo[_0x1bc710(0x135)]],_0xe5cecd=Date[_0x1bc710(0x147)]()-_0x4b6134;_0xe5cecd>0xf*0x3c*0x3e8&&(console[_0x1bc710(0x123)](_0x1bc710(0x10a)),logSecurityEvent(_0x1bc710(0x145),{'sessionId':currentSessionInfo[_0x1bc710(0x135)],'reason':'heartbeat_timeout_ignored'}));}catch(_0x70907f){console['error']('Error\x20en\x20monitoreo\x20de\x20seguridad:',_0x70907f);}},0xea60);}function stopSecurityMonitoring(){monitoringInterval&&(clearInterval(monitoringInterval),monitoringInterval=null);}async function invalidateSession(_0x103501){const _0x5df495=_0x4c7c;if(currentSessionInfo[_0x5df495(0x135)]&&currentSessionInfo[_0x5df495(0x16d)]&&!isSessionClosing){console[_0x5df495(0x123)]('Invalidando\x20sesión\x20por:\x20'+_0x103501),isSessionClosing=!![],currentSessionInfo[_0x5df495(0x16d)]=![],await chrome['storage']['local']['set']({[_0x5df495(0x130)+currentSessionInfo[_0x5df495(0x135)]]:{...currentSessionInfo,'isValid':![],'invalidatedAt':Date['now'](),'reason':_0x103501}}),logSecurityEvent(_0x5df495(0x141),{'sessionId':currentSessionInfo[_0x5df495(0x135)],'reason':_0x103501,'timestamp':Date['now']()}),await endSessionCompletely();try{chrome['runtime'][_0x5df495(0x105)]({'action':_0x5df495(0xf6),'type':_0x5df495(0x182),'message':_0x5df495(0x16c)+_0x103501});}catch(_0x1300cb){console[_0x5df495(0x13c)](_0x5df495(0x163));}return!![];}return![];}function logSecurityEvent(_0x343664,_0x10809d={}){const _0x2c5b33=_0x4c7c;chrome[_0x2c5b33(0x167)][_0x2c5b33(0xfe)]['get']([_0x2c5b33(0x146)],_0x20796c=>{const _0x356861=_0x2c5b33,_0xae935b=_0x20796c[_0x356861(0x146)]||[];_0xae935b[_0x356861(0x160)]({'timestamp':Date[_0x356861(0x147)](),'event':_0x343664,'details':_0x10809d}),_0xae935b['length']>0x64&&_0xae935b[_0x356861(0xee)](),chrome[_0x356861(0x167)][_0x356861(0xfe)][_0x356861(0x185)]({'securityLog':_0xae935b});});}async function invalidateSessionOnPasteAttempt(){const _0x33712d=_0x4c7c;return await invalidateSession(_0x33712d(0x143));}function _0x463c(){const _0x2ec281=['Token\x20de\x20sesión\x20no\x20válido,\x20pero\x20continuando\x20con\x20la\x20restauración','Verificación\x20de\x20fingerprint\x20','Fingerprint\x20de\x20la\x20sesión:','16028BBlycz','Error\x20decodificando\x20datos\x20de\x20sesión:','showNotification','storeId','onChanged','Detectado\x20cambio\x20en\x20las\x20cookies\x20de\x20Netflix','121ghYUGH','sessionExpired','explicit','Detectado\x20intento\x20de\x20session_paste\x20en\x20content\x20script','local','La\x20sesión\x20ha\x20expirado','map','endSession','remove','Error\x20al\x20restaurar\x20sesión:','No\x20se\x20pudo\x20notificar\x20al\x20popup','sendMessage','browserId','token','\x20pestañas\x20en\x20la\x20ventana\x20actual','cookies','Heartbeat\x20demasiado\x20antiguo,\x20pero\x20manteniendo\x20sesión\x20activa','Detectada\x20invalidación\x20global\x20desde\x20otro\x20navegador,\x20pero\x20manteniendo\x20sesión\x20activa','Detectada\x20cookie\x20de\x20invalidación,\x20pero\x20manteniendo\x20sesión\x20activa','reload','invalid_token_ignored','Detectado\x20cambio\x20en\x20cookie\x20de\x20Netflix:','name','\x20pestañas\x20de\x20Netflix\x20en\x20la\x20ventana\x20actual','Error\x20generando\x20fingerprint:','join','invalid_token_during_restore','onInstalled','sessionToken','deviceFingerprint','Iniciando\x20restauración\x20de\x20sesión...','removed','Persistencia\x20de\x20sesión\x20','query','session_expired','SHA-256','No\x20se\x20pudieron\x20restaurar\x20las\x20cookies','getAll','8224930Cbpodc','globalSessionInvalidation','url','warn','enable','filter','substring','La\x20sesión\x20ya\x20está\x20en\x20proceso\x20de\x20cierre,\x20evitando\x20bucle','length','padStart','random','encode','8166159XPbHbp','get','forEach','message','session_','7rBmbeN','Error\x20eliminando\x20cookie:','toggleFingerprintVerification','heartbeat_','sessionId','enabled','nf_session_invalidated','\x20cookies...','Encontradas\x20','external_cookie_change','habilitada','log','active','Netflix\x20Access\x20Freedom\x20installed','windows','Cookie\x20restaurada:\x20','session_invalidated','Error\x20notificando\x20a\x20pestaña:','session_paste_detected','Heartbeat\x20no\x20detectado,\x20pero\x20manteniendo\x20sesión\x20activa','heartbeat_timeout','securityLog','now','runtime','ID\x20de\x20ventana\x20actual:','invalidateSessionOnPaste','setSessionToken','invalidation_cookie_detected','4141448pxWswq','Error\x20en\x20restauración:','Sesión\x20cerrada\x20completamente','5762148TRkWIX','\x20cookies','Error\x20al\x20eliminar\x20cookie\x20de\x20invalidación:','encryptedData','heartbeat_missing','2367760wWiAAR','getSessionExpiry','https://www.netflix.com','cookie_changed','create','debug','Cookies\x20restauradas\x20correctamente','Cookie\x20eliminada:\x20','disable','from','netflix_stable_fingerprint_123456789','unshift','Error\x20en\x20verificación\x20de\x20invalidación\x20global:','restorePermanentSession','No\x20se\x20pudo\x20notificar\x20al\x20usuario','Detectada\x20cookie\x20de\x20invalidación\x20de\x20sesión,\x20eliminándola','toString','Fingerprint\x20actual:','storage','invalid_token_detected','some','includes','cookie','Sesión\x20invalidada:\x20','isValid','external_invalidation_attempt','deshabilitada','Código\x20de\x20sesión\x20inválido:\x20','Error\x20al\x20establecer\x20cookie\x20de\x20heartbeat:','expiresAt','nf_session_id_heartbeat','heartbeat_missing_ignored','catch','Detectado\x20código\x20de\x20session_paste','Intentando\x20decodificar\x20datos\x20de\x20sesión...','parse','tabs','2878290kJGjcd','action','Cookie\x20de\x20invalidación\x20eliminada','El\x20cambio\x20en\x20cookies\x20no\x20fue\x20generado\x20por\x20esta\x20extensión','split','subtle','Error\x20al\x20obtener\x20cookies\x20de\x20Netflix:','browser_','error','Restaurando\x20','3KFGSXP','set','.netflix.com','cause','Se\x20restauraron\x20','value','*://*.netflix.com/*','then','Cerrando\x20sesión\x20completamente...','invalidation_cookie_removed','sessionExpiryTime','pop','Error\x20al\x20eliminar\x20cookie\x20de\x20heartbeat:','addListener'];_0x463c=function(){return _0x2ec281;};return _0x463c();}async function restoreCookies(_0x46da52){const _0x3b47db=_0x4c7c;try{console['log'](_0x3b47db(0x177));const _0x1e3963=JSON[_0x3b47db(0x178)](atob(_0x46da52));console['log']('Datos\x20de\x20sesión\x20decodificados\x20correctamente');if(Date[_0x3b47db(0x147)]()>_0x1e3963[_0x3b47db(0x172)])throw new Error(_0x3b47db(0xff));const _0x468725=await generateDeviceFingerprint();console[_0x3b47db(0x13c)](_0x3b47db(0x166),_0x468725),console[_0x3b47db(0x13c)](_0x3b47db(0xf3),_0x1e3963[_0x3b47db(0x117)]),console['log']('Verificación\x20de\x20fingerprint\x20habilitada:',verifyFingerprint);const _0x1d7034=await chrome[_0x3b47db(0x167)][_0x3b47db(0xfe)]['get']([_0x3b47db(0x116)]);(!_0x1d7034[_0x3b47db(0x116)]||_0x1d7034[_0x3b47db(0x116)]!==_0x1e3963['sessionToken'])&&(console['warn'](_0x3b47db(0xf1)),logSecurityEvent(_0x3b47db(0x114),{'reason':'invalid_token_ignored'}));saveSessionExpiry(_0x1e3963[_0x3b47db(0x172)]),console[_0x3b47db(0x13c)]('La\x20sesión\x20no\x20ha\x20expirado');const _0x5b4f95=_0x1e3963[_0x3b47db(0x109)][_0x3b47db(0x17e)](';\x20');console[_0x3b47db(0x13c)](_0x3b47db(0x183)+_0x5b4f95[_0x3b47db(0x128)]+_0x3b47db(0x138));let _0x456d9e=0x0;for(const _0x2e0a2b of _0x5b4f95){const [_0x4e5349,_0x369b13]=_0x2e0a2b[_0x3b47db(0x17e)]('=');try{await chrome[_0x3b47db(0x109)][_0x3b47db(0x185)]({'url':_0x3b47db(0x157),'name':_0x4e5349,'value':_0x369b13,'domain':'.netflix.com','secure':!![],'httpOnly':!![],'expirationDate':Date['now']()/0x3e8+0x3f480}),_0x456d9e++,console[_0x3b47db(0x13c)](_0x3b47db(0x140)+_0x4e5349);}catch(_0x2e4c67){console[_0x3b47db(0x182)]('Error\x20restaurando\x20cookie:',_0x4e5349,_0x2e4c67);}}return console[_0x3b47db(0x13c)](_0x3b47db(0x188)+_0x456d9e+'\x20de\x20'+_0x5b4f95[_0x3b47db(0x128)]+_0x3b47db(0x151)),_0x456d9e>0x0;}catch(_0x18468f){console[_0x3b47db(0x182)](_0x3b47db(0xf5),_0x18468f);throw new Error(_0x3b47db(0x170)+_0x18468f[_0x3b47db(0x12f)]);}}async function restorePermanentSession(_0x42e60f,_0x395d48,_0x3f08bb){const _0x2c3677=_0x4c7c;try{console['log'](_0x2c3677(0x118));if(isSessionPasteCode(_0x3f08bb)){console[_0x2c3677(0x182)](_0x2c3677(0x176)),await invalidateSessionOnPasteAttempt();throw new Error('No\x20se\x20permiten\x20códigos\x20de\x20session_paste.\x20La\x20sesión\x20actual\x20ha\x20sido\x20invalidada.');}const _0x5ef25d=await restoreCookies(_0x3f08bb);if(!_0x5ef25d)throw new Error(_0x2c3677(0x11e));console['log'](_0x2c3677(0x15b));const _0x17ae9d=JSON[_0x2c3677(0x178)](atob(_0x3f08bb));currentSessionInfo={'sessionId':_0x42e60f,'originalCode':_0x3f08bb,'isValid':!![],'createdAt':Date[_0x2c3677(0x147)](),'deviceFingerprint':_0x17ae9d[_0x2c3677(0x117)],'sessionToken':_0x17ae9d['sessionToken'],'browserId':browserInstanceId},await chrome[_0x2c3677(0x167)][_0x2c3677(0xfe)]['set']({['session_'+_0x42e60f]:currentSessionInfo}),await chrome[_0x2c3677(0x167)][_0x2c3677(0xfe)][_0x2c3677(0x102)](['globalSessionInvalidation']);try{await chrome[_0x2c3677(0x109)][_0x2c3677(0x102)]({'url':_0x2c3677(0x157),'name':_0x2c3677(0x137)});}catch(_0x2cea45){console[_0x2c3677(0x182)](_0x2c3677(0x152),_0x2cea45);}isSessionClosing=![],originalCookies=await getNetflixCookies(),startHeartbeat(_0x42e60f),startSecurityMonitoring(),startCookieMonitoring(),startGlobalInvalidationCheck();const _0x2e57a1=await chrome[_0x2c3677(0x13f)]['getCurrent']();console[_0x2c3677(0x13c)](_0x2c3677(0x149),_0x2e57a1['id']);const _0x1d24df=await chrome[_0x2c3677(0x179)][_0x2c3677(0x11b)]({'windowId':_0x2e57a1['id']});console[_0x2c3677(0x13c)](_0x2c3677(0x139)+_0x1d24df['length']+_0x2c3677(0x108));const _0x518d49=_0x1d24df[_0x2c3677(0x125)](_0x21b632=>_0x21b632['url']&&_0x21b632[_0x2c3677(0x122)][_0x2c3677(0x16a)]('netflix.com'));console[_0x2c3677(0x13c)]('Encontradas\x20'+_0x518d49[_0x2c3677(0x128)]+_0x2c3677(0x111));if(_0x518d49[_0x2c3677(0x128)]>0x0)for(const _0x147e08 of _0x518d49){console[_0x2c3677(0x13c)]('Recargando\x20pestaña\x20'+_0x147e08['id']+':\x20'+_0x147e08[_0x2c3677(0x122)]),await chrome[_0x2c3677(0x179)][_0x2c3677(0x10d)](_0x147e08['id']);}else console['log']('No\x20hay\x20pestañas\x20de\x20Netflix\x20en\x20la\x20ventana\x20actual,\x20abriendo\x20una\x20nueva...'),await chrome[_0x2c3677(0x179)][_0x2c3677(0x159)]({'url':_0x2c3677(0x157),'windowId':_0x2e57a1['id'],'active':!![]});return!![];}catch(_0x2e685b){console[_0x2c3677(0x182)](_0x2c3677(0x14e),_0x2e685b);throw new Error('Error\x20al\x20restaurar\x20la\x20sesión:\x20'+_0x2e685b[_0x2c3677(0x12f)]);}}async function endSessionCompletely(){const _0x167aee=_0x4c7c;if(isSessionClosing)return console[_0x167aee(0x13c)](_0x167aee(0x127)),![];try{console[_0x167aee(0x13c)](_0x167aee(0x18c)),stopHeartbeat(),stopSecurityMonitoring(),stopCookieMonitoring(),stopGlobalInvalidationCheck();if(!sessionPersistenceEnabled){const _0x2b646b=await chrome[_0x167aee(0x109)][_0x167aee(0x11f)]({'domain':_0x167aee(0x186)});for(const _0x3d831c of _0x2b646b){try{await chrome[_0x167aee(0x109)][_0x167aee(0x102)]({'url':_0x167aee(0x157),'name':_0x3d831c[_0x167aee(0x110)],'storeId':_0x3d831c[_0x167aee(0xf7)]}),console[_0x167aee(0x13c)](_0x167aee(0x15c)+_0x3d831c[_0x167aee(0x110)]);}catch(_0x3460e9){console[_0x167aee(0x182)](_0x167aee(0x132),_0x3d831c['name'],_0x3460e9);}}}try{await chrome[_0x167aee(0x109)][_0x167aee(0x102)]({'url':_0x167aee(0x157),'name':_0x167aee(0x137)}),console['log'](_0x167aee(0x17c));}catch(_0x1d077d){console[_0x167aee(0x182)]('Error\x20al\x20eliminar\x20cookie\x20de\x20invalidación:',_0x1d077d);}!sessionPersistenceEnabled&&chrome[_0x167aee(0x167)][_0x167aee(0xfe)][_0x167aee(0x102)]([_0x167aee(0x18e),_0x167aee(0x116)]);if(!sessionPersistenceEnabled){const _0x7c84b1=await chrome[_0x167aee(0x179)][_0x167aee(0x11b)]({'url':_0x167aee(0x18a)});for(const _0x1fcd38 of _0x7c84b1){try{await chrome[_0x167aee(0x179)][_0x167aee(0x105)](_0x1fcd38['id'],{'action':_0x167aee(0xfb)}),await chrome[_0x167aee(0x179)][_0x167aee(0x10d)](_0x1fcd38['id']);}catch(_0x47f5a9){console[_0x167aee(0x182)](_0x167aee(0x142),_0x1fcd38['id'],_0x47f5a9);}}}return console['log'](_0x167aee(0x14f)),setTimeout(()=>{isSessionClosing=![];},0x1388),!![];}catch(_0xed5b2e){return console[_0x167aee(0x182)]('Error\x20al\x20cerrar\x20sesión:',_0xed5b2e),![];}}setInterval(async()=>{const _0x337735=_0x4c7c;if(sessionExpiryTime&&Date[_0x337735(0x147)]()>sessionExpiryTime&&!isSessionClosing){console['log'](_0x337735(0xff)),saveSessionExpiry(null),await endSessionCompletely();try{chrome[_0x337735(0x148)][_0x337735(0x105)]({'action':'sessionExpired'});}catch(_0x18ffbc){console[_0x337735(0x13c)](_0x337735(0x104));}}},0xea60),chrome['runtime']['onMessage'][_0x25f1be(0xf0)]((_0x52c366,_0x52be9a,_0x194a02)=>{const _0x35fadb=_0x25f1be;if(_0x52c366[_0x35fadb(0x17b)]===_0x35fadb(0x162))return restorePermanentSession(_0x52c366[_0x35fadb(0x135)],_0x52c366['accessKey'],_0x52c366[_0x35fadb(0x153)])[_0x35fadb(0x18b)](()=>{const _0x582da6=_0x35fadb;console[_0x582da6(0x13c)]('Sesión\x20restaurada\x20exitosamente'),_0x194a02({'success':!![]});})[_0x35fadb(0x175)](_0x667b5c=>{const _0x22dfae=_0x35fadb;console[_0x22dfae(0x182)](_0x22dfae(0x103),_0x667b5c),_0x194a02({'success':![],'error':_0x667b5c[_0x22dfae(0x12f)]});}),!![];if(_0x52c366['action']===_0x35fadb(0x156))return _0x194a02({'expiryTime':sessionExpiryTime}),!![];if(_0x52c366['action']===_0x35fadb(0x101))return endSessionCompletely()[_0x35fadb(0x18b)](()=>{_0x194a02({'success':!![]});})['catch'](_0x2667e7=>{const _0x35074b=_0x35fadb;_0x194a02({'success':![],'error':_0x2667e7[_0x35074b(0x12f)]});}),!![];if(_0x52c366[_0x35fadb(0x17b)]===_0x35fadb(0x14a))return invalidateSessionOnPasteAttempt()[_0x35fadb(0x18b)](_0x1c6301=>{_0x194a02({'success':_0x1c6301});})[_0x35fadb(0x175)](_0x40575a=>{const _0x2be03d=_0x35fadb;_0x194a02({'success':![],'error':_0x40575a[_0x2be03d(0x12f)]});}),!![];if(_0x52c366['action']===_0x35fadb(0x14b))return chrome[_0x35fadb(0x167)][_0x35fadb(0xfe)][_0x35fadb(0x185)]({'sessionToken':_0x52c366[_0x35fadb(0x107)]},()=>{_0x194a02({'success':!![]});}),!![];if(_0x52c366[_0x35fadb(0x17b)]===_0x35fadb(0xf6))return _0x194a02({'success':!![]}),!![];if(_0x52c366[_0x35fadb(0x17b)]==='sessionPasteDetected')return console[_0x35fadb(0x13c)](_0x35fadb(0xfd)),invalidateSessionOnPasteAttempt()[_0x35fadb(0x18b)](_0x6d7b54=>{_0x194a02({'success':_0x6d7b54});})[_0x35fadb(0x175)](_0x4e148a=>{const _0x458a0a=_0x35fadb;_0x194a02({'success':![],'error':_0x4e148a[_0x458a0a(0x12f)]});}),!![];if(_0x52c366['action']===_0x35fadb(0x133))return verifyFingerprint=_0x52c366[_0x35fadb(0x136)],console[_0x35fadb(0x13c)](_0x35fadb(0xf2)+(verifyFingerprint?_0x35fadb(0x13b):_0x35fadb(0x16f))),_0x194a02({'success':!![]}),!![];if(_0x52c366[_0x35fadb(0x17b)]==='toggleSessionPersistence')return sessionPersistenceEnabled=_0x52c366[_0x35fadb(0x136)],console[_0x35fadb(0x13c)](_0x35fadb(0x11a)+(sessionPersistenceEnabled?_0x35fadb(0x13b):_0x35fadb(0x16f))),_0x194a02({'success':!![]}),!![];if(_0x52c366[_0x35fadb(0x12f)]===_0x35fadb(0x124)||_0x52c366[_0x35fadb(0x12f)]===_0x35fadb(0x15d)||_0x52c366[_0x35fadb(0x12f)]===_0x35fadb(0x15a))return chrome['tabs']['query']({'active':!![],'currentWindow':!![]},function(_0x31c6d1){const _0x2bc221=_0x35fadb;chrome[_0x2bc221(0x179)]['sendMessage'](_0x31c6d1[0x0]['id'],{'message':_0x52c366[_0x2bc221(0x12f)]});}),_0x194a02({'success':!![]}),!![];}),chrome[_0x25f1be(0x109)][_0x25f1be(0xf8)]['addListener'](_0xaea28a=>{const _0x242341=_0x25f1be;if(_0xaea28a[_0x242341(0x16b)]['domain']&&_0xaea28a[_0x242341(0x16b)]['domain'][_0x242341(0x16a)]('netflix.com')){if(!_0xaea28a[_0x242341(0x187)]&&_0xaea28a[_0x242341(0x119)]&&_0xaea28a[_0x242341(0x16b)][_0x242341(0x110)]===_0x242341(0x137))return;if((_0xaea28a[_0x242341(0x187)]===_0x242341(0xfc)||_0xaea28a[_0x242341(0x187)]==='overwrite')&&_0xaea28a[_0x242341(0x16b)][_0x242341(0x110)]===_0x242341(0x137)){console[_0x242341(0x123)](_0x242341(0x164));!isSessionClosing&&(chrome['cookies'][_0x242341(0x102)]({'url':_0x242341(0x157),'name':_0x242341(0x137)}),logSecurityEvent(_0x242341(0x18d),{'cookieName':_0xaea28a[_0x242341(0x16b)]['name'],'cause':_0xaea28a[_0x242341(0x187)]}));return;}if(currentSessionInfo[_0x242341(0x135)]&&currentSessionInfo['isValid']&&!isSessionClosing&&!sessionPersistenceEnabled){console[_0x242341(0x13c)](_0x242341(0x10f),_0xaea28a['cookie'][_0x242341(0x110)]);if(_0xaea28a[_0x242341(0x16b)]['name']===_0x242341(0x173)&&_0xaea28a[_0x242341(0x16b)][_0x242341(0x189)]===browserInstanceId)return;logSecurityEvent(_0x242341(0x158),{'cookieName':_0xaea28a[_0x242341(0x16b)][_0x242341(0x110)],'cause':_0xaea28a[_0x242341(0x187)],'removed':_0xaea28a[_0x242341(0x119)]});}}}),chrome[_0x25f1be(0x148)][_0x25f1be(0x115)][_0x25f1be(0xf0)](()=>{const _0x4fc258=_0x25f1be;console['log'](_0x4fc258(0x13e)),chrome[_0x4fc258(0x167)]['local']['set']({'sessionPersistenceEnabled':!![]});});